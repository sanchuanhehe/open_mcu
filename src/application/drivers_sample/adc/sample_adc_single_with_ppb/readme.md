# ADC的后处理功能
## 关键字: ADC, 误差计算，阈值检测

**【功能描述】**
+ 示例代码基于HAL接口完成时钟、中断和ADC控制器初始化和功能配置。ADC的后处理功能，当ADC完成一次普通的采样完成后，对于采样结果进行处理操作。
+ 误差计算功能：设置一个参考值，采样结束后，自动计算出参考值和采样结果的差值，并保存在寄存器中。
+ 阈值检测功能：设置阈值的上下限，当参考值和采样结果的差值大于上阈值或者小于下阈值，会产生中断。

**【示例配置】**
+ ADC触发源：软件触发。使用接口"HAL_ADC_SoftTrigSample()”启动软件触发。示例中一个触发了三次，第一次触发读出普通的采样结果；设置后处理参数，第二次触发进行后处理功能；修改后处理参数，第三次触发再次进行后处理功能。

+ ADC采样源：挂载到SOC1部采样源。SOC可以配置为“ADC_SOC_NUM0~ADC_SOC_NUM15”中任意一个。

+ ADC采样结果：在过采样的中断中读出过采样的结果。每次触发产生的采样结果均产生一个数据完成中断，在中断回调函数中使用“HAL_ADC_GetConvResult()”进行读取。

**【示例效果】**
+ 当用户烧录编译后的示例代码后，初始化和配置完成，软件触发。第一次触发采样结束后，只打印出ADC的采样结果。后两次触发，按照后处理参数的配置和当前采样结果，触发不同的后处理中断，然后在中断回调函数中打印相应的字符串。

**【注意事项】**
+ 示例代码使用UART0进行结果打印输出，需要对UART0进行初始化配置。

+ 不通过IDE创建生成场景：初始化配置请参考sample下的init文件内容；
+ 通过IDE创建生成场景：初始化配置请参考user/generatecode下的文件内容。