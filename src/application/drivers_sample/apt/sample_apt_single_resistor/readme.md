# 高级脉宽调制PWM-单电阻采样电机控制
## 关键字: 互补PWM波, 电机控制, 单电阻采样

**【功能描述】**
+ 该示例为单电阻采样的电机控制样例，输出U,V和W相的带死区的互补PWM波。

+ 在U相配置有触发ADC采样的SOC信号。

**【示例配置】**
+ 通过配置APT0，APT1和APT2来配置U，V，W相的互补PWM波。APT0、APT1、APT2的配置分别对应U、V、W相的互补PWM波。

+ PWM输出保护，三相PWM输出都配置了保护时间，分别为指定管脚拉高保护，调试模式保护，时钟错误保护，内存泄漏保护。

+ 以上配置可通过APT配置界面进行更改，或在“system_init.c”中更改APT对应的配置。

**【示例效果】**
+ 若保护事件来临，APT模块会停止PWM波的输出，保护电机等硬件设备。
 
**【注意事项】**
+ 占空比可通过“HAL_APT_SetPWMDutyByNumber”进行更改。

+ 分频器的分频系数的范围为 0到4095，计数器的计数周期值的范围为 0到65535。死区延时计数值范围 0到65535。

+ PWM 波的频率:
```c
①递增/递减计时模式，PWM 波的频率 = 工作时钟频率 / ((分频器的分频系数+1)*(计数器的计数周期值+1));
②先增后减计时模式，PWM 波的频率 = 工作时钟频率 / ((分频器的分频系数+1)*(计数器的计数周期值*2))。
```
+ 死区的宽度：插入死区的宽度 = 工作时钟周期 * 死区延时计数值。

+ 此示例init文件夹下的工程初始化配置是基于3061MNPICA芯片工程生成的。
+ 不通过IDE创建生成场景：初始化配置请参考sample下的init文件内容。
+ 通过IDE创建生成场景：初始化配置请参考user/generatecode下的文件内容。